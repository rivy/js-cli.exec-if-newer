#!/usr/bin/env node
const e=require("yargs"),r=require("globby"),s=require("execa"),t=require("fs");function i(e){return r(e,{stats:!0})}!async function(e){const a=await i(e.source),o=await i(e.target);if(!!e.target.filter(e=>!r.hasMagic(e)).find(e=>!t.existsSync(e))||isSourceNewer(a,o))try{const r=function(e){if(e._&&e._.length)return e._.join(" ");throw new Error("Missing command")}(e),t=s.shell(r);t.stdout.pipe(process.stdout),t.stderr.pipe(process.stderr),process.stdin.pipe(t.stdin),await t,process.exit()}catch(e){console.error(e.message),process.exit(1)}else process.exit()}(e.example("$0 --source src/** --source assets/** --target dist/** npm run build").option("s",{alias:"source",demandOption:!0,describe:"A glob describing the source files that may be updated. May be supplied more than once for additional source files.",type:"array",nargs:1}).option("t",{alias:"target",demandOption:!0,describe:"A glob describing the target files to which the source files will be compared. May be supplied more than once for additional target files.",type:"array",nargs:1}).wrap(e.terminalWidth()).argv);